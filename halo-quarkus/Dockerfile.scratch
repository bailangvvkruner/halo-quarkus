# Scratch 镜像（最小，只包含可执行文件）
FROM scratch

# 复制 CA 证书（如果需要 HTTPS）
COPY --from=alpine:3.19 /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/

# 复制 Native 可执行文件
COPY halo-core/target/halo-core-1.0.0-SNAPSHOT-runner /app/halo

# 复制时区数据
COPY --from=alpine:3.19 /usr/share/zoneinfo /usr/share/zoneinfo

# Halo 环境变量
ENV HALO_WORK_DIR=/root/.halo2 \
    TZ=Asia/Shanghai

WORKDIR /app

EXPOSE 8090

ENTRYPOINT ["/app/halo"]
